=i.sequence+","+(n||i.label),e&&e(o),_w.performance&&performance.mark&&performance.mark(o),i},n.prototype.recordApiTime=function(n){return this.recordApiTimeDetail(n),null},n.prototype.uploadApiTimes=function(n){var t=_G.ApiTimes;this.recordApiTime(n);t&&typeof Log2!="undefined"&&Log2&&(Log2.LogEvent("CPT2",{wt:t},null,null,null,null,null,null),_G.ApiTimes={})},n.prototype.wrapSynchronousApiCall=function(n,t,i,r){for(var e,o,s,h=this,f=[],u=4;u<arguments.length;u++)f[u-4]=arguments[u];e=this.recordApiTimeDetail(i?i+"S":null,t);s=function(n,u){var o=h.recordApiTimeDetail(i?i+n:null,t,e),s=u?" exception: "+u.stack:"";h.recordApiString("ApiEnd "+n+' \t"'+(r?r:"")+'"\t'+t+"("+f.join(", ")+")\t"+(o.time.getTime()-e.time.getTime())+"ms elapsed"+s)};try{o=n[t].apply(n,f);s("C")}catch(c){s("E",c);SharedLogHelper.LogError("Exception","Failed while calling overrideMethod: "+t,c);o=null}return o},n.prototype.wrapApiCall=function(){for(var i,n=[],t=4;t<arguments.length;t++)n[t-4]=arguments[t];for(n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);return n.splice(4,0,0,null),this.wrapApiCallWithTimeout.apply(this,n)},n.prototype.wrapApiCallWithTimeout=function(n,t,i,r,u,f){for(var y,s=[],h=6;h<arguments.length;h++)s[h-6]=arguments[h];if(_w.SearchAppWrapperLogging)return n[t].apply(n,s);var l=this,a=this.recordApiTimeDetail(i?i+"S":null,t),e,o,c=function(n,u){var e="stack",o=l.recordApiTimeDetail(i?i+n:null,t,a),f=u&&u[e]?" exception: "+u[e]:"";u&&f===""&&(f=" Windows error: "+u.message);l.recordApiString("ApiEnd "+n+' \t"'+(r?r:"")+'"\t'+t+"("+s.join(", ")+")\t"+(o.time.getTime()-a.time.getTime())+"ms elapsed"+f)};try{o=n[t].apply(n,s);this.recordApiTimeDetail(i?i+"P":null,t);u&&u>0&&(e=sb_st(function(){o&&o.cancel&&o.cancel();c("T");f&&f(null)},u));o.then(function(n){return e&&sb_ct(e),c("C"),n},function(n){e&&sb_ct(e);c("E",n);SharedLogHelper.LogError("Exception","Failed in overrideMethod callback: "+t,n);f&&f(null)})}catch(v){e&&sb_ct(e);c("E",v);SharedLogHelper.LogError("Exception","Failed while calling overrideMethod: "+t,v);y=new FailedPromise;o=y.then(null,f)}return o},n.prototype.cleanGuid=function(n){var t=n;return t&&(t=t.replace(this.guidCleaner,"")),t},n.prototype.parseJSON=function(n){var t,i=null;if(n)try{t=JSON.parse(n)}catch(r){i=r}return t||console.log("Unable to parse JSON input: "+n+(i?".  Exception: "+i:"")),t},n.prototype.getCortanaHeaders=function(n){var e=this,t=this;if(this.headersCallComplete){n(this.cortanaHeaders);return}if(this.headersCallbacks.push(n),!this.headersAsyncPromise){var i=null,u=!1,f=function(){i&&(sb_ct(i),i=null);t.headersCallComplete=!0},r=function(){var i,r,n;if(!u)for(t.cortanaHeaders||(t.cortanaHeadersTimedOut?SharedLogHelper.LogWarning("getCortanaHeaders",null,"Timeout"):SharedLogHelper.LogError("getCortanaHeaders",null,t.cortanaHeadersError||new Error("Missing headers"))),i=t.headersCallbacks,r=i.length,n=0;n<r;n++)i[n](t.cortanaHeaders)},o=function(n){f();e.headerOverrides(n);t.cortanaHeaders=n;t.cortanaHeadersError=null;t.cortanaHeadersTimedOut=!1;r()},s=function(n){f();t.cortanaHeaders=null;t.cortanaHeadersError=n;t.cortanaHeadersTimedOut=!1;r()};i=sb_st(function(){t.cortanaHeaders=null;t.cortanaHeadersError=null;t.cortanaHeadersTimedOut=!0;r();u=!0},this.headersCallTimeout);this.headersAsyncPromise=this.wrapApiCall(SearchAppWrapper.CortanaApp,"getQueryHeadersAsync","GQH_","getQueryHeaders").then(o,s)}},n.prototype.headerOverrides=function(n){var t=SearchAppWrapper.CortanaApp.width,i=SearchAppWrapper.CortanaApp.height,r;t&&i&&(n["X-BM-DeviceDimensionsLogical"]=t+"x"+i,r=SearchAppWrapper.CortanaApp.deviceScale,r!=100&&(t=t*r/100,i=i*r/100),n["X-BM-DeviceDimensions"]=t+"x"+i)},n.prototype.getThemeColor=function(n){function u(n){var t,r;i.themeColor===null&&n&&(t=n.split(";"),t.length==2&&(i.isDarkTheme=t[0]=="000000",r=t[1],r&&(i.themeColor="#"+r)))}var t=this,i=this,r;this.themeColor===null?(r=SearchAppWrapper.CortanaApp.theme,typeof r!="undefined"?(u(r),n(this.themeColor,this.isDarkTheme)):this.getCortanaHeaders(function(i){t.themeColor===null&&i&&(u(i["X-BM-Theme"]),n(t.themeColor,t.isDarkTheme))})):n(this.themeColor,this.isDarkTheme)},n.prototype.isRightToLeftLanguage=function(n){return this.rtlLangs.some(function(t){return n=n.toLocaleLowerCase(),n==t||n.indexOf(t+"-")==0})},n.prototype.setBodyLangAttributes=function(n){_d.body.setAttribute("dir",this.isRightToLeftLanguage(n)?"rtl":"ltr");_d.body.setAttribute("lang",n)},n.prototype.recordApiString=function(n){ThresholdDiagnostics.recordApiString(n)},n.prototype.pushOntoArray=function(n,t){if(n&&t)for(var i in t)n.push(t[i])},n.prototype.navigateTo=function(n,t){var i=sj_ce("a","b_hide");i.href=n;i.setAttribute("data-h",t.GetNamespace